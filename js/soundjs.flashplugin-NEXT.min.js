/**
* SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2012 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
* 
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
**/

/**
 * SoundJS FlashPlugin also includes swfobject (http://code.google.com/p/swfobject/)
 */var swfobject=function(){function g(){if(!z){try{var c=b.getElementsByTagName("body")[0].appendChild(b.createElement("span"));c.parentNode.removeChild(c)}catch(a){return}z=!0;for(var c=H.length,d=0;d<c;d++)H[d]()}}function x(c){z?c():H[H.length]=c}function B(c){if(typeof t.addEventListener!=m)t.addEventListener("load",c,!1);else if(typeof b.addEventListener!=m)b.addEventListener("load",c,!1);else if(typeof t.attachEvent!=m){var a=t;a.attachEvent("onload",c);C[C.length]=[a,"onload",c]}else if("function"==
typeof t.onload){var d=t.onload;t.onload=function(){d();c()}}else t.onload=c}function a(){var c=v.length;if(0<c)for(var a=0;a<c;a++){var d=v[a].id,h=v[a].callbackFn,l={success:!1,id:d};if(0<f.pv[0]){var b=r(d);if(b)if(I(v[a].swfVersion)&&!(f.wk&&312>f.wk))A(d,!0),h&&(l.success=!0,l.ref=e(d),h(l));else if(v[a].expressInstall&&j()){l={};l.data=v[a].expressInstall;l.width=b.getAttribute("width")||"0";l.height=b.getAttribute("height")||"0";b.getAttribute("class")&&(l.styleclass=b.getAttribute("class"));
b.getAttribute("align")&&(l.align=b.getAttribute("align"));for(var S={},b=b.getElementsByTagName("param"),g=b.length,n=0;n<g;n++)"movie"!=b[n].getAttribute("name").toLowerCase()&&(S[b[n].getAttribute("name")]=b[n].getAttribute("value"));N(l,S,d,h)}else q(b),h&&h(l)}else if(A(d,!0),h){if((d=e(d))&&typeof d.SetVariable!=m)l.success=!0,l.ref=d;h(l)}}}function e(c){var a=null;if((c=r(c))&&"OBJECT"==c.nodeName)typeof c.SetVariable!=m?a=c:(c=c.getElementsByTagName(y)[0])&&(a=c);return a}function j(){return!J&&
I("6.0.65")&&(f.win||f.mac)&&!(f.wk&&312>f.wk)}function N(c,a,d,h){J=!0;O=h||null;T={success:!1,id:d};var l=r(d);if(l){"OBJECT"==l.nodeName?(F=u(l),K=null):(F=l,K=d);c.id=U;if(typeof c.width==m||!/%$/.test(c.width)&&310>parseInt(c.width,10))c.width="310";if(typeof c.height==m||!/%$/.test(c.height)&&137>parseInt(c.height,10))c.height="137";b.title=b.title.slice(0,47)+" - Flash Player Installation";h=f.ie&&f.win?"ActiveX":"PlugIn";h="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,
"%26")+"&MMplayerType="+h+"&MMdoctitle="+b.title;a.flashvars=typeof a.flashvars!=m?a.flashvars+("&"+h):h;f.ie&&(f.win&&4!=l.readyState)&&(h=b.createElement("div"),d+="SWFObjectNew",h.setAttribute("id",d),l.parentNode.insertBefore(h,l),l.style.display="none",function(){4==l.readyState?l.parentNode.removeChild(l):setTimeout(arguments.callee,10)}());P(c,a,d)}}function q(c){if(f.ie&&f.win&&4!=c.readyState){var a=b.createElement("div");c.parentNode.insertBefore(a,c);a.parentNode.replaceChild(u(c),a);c.style.display=
"none";(function(){4==c.readyState?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)})()}else c.parentNode.replaceChild(u(c),c)}function u(c){var a=b.createElement("div");if(f.win&&f.ie)a.innerHTML=c.innerHTML;else if(c=c.getElementsByTagName(y)[0])if(c=c.childNodes)for(var d=c.length,h=0;h<d;h++)!(1==c[h].nodeType&&"PARAM"==c[h].nodeName)&&8!=c[h].nodeType&&a.appendChild(c[h].cloneNode(!0));return a}function P(c,a,d){var h,l=r(d);if(f.wk&&312>f.wk)return h;if(l)if(typeof c.id==m&&(c.id=
d),f.ie&&f.win){var e="",j;for(j in c)c[j]!=Object.prototype[j]&&("data"==j.toLowerCase()?a.movie=c[j]:"styleclass"==j.toLowerCase()?e+=' class="'+c[j]+'"':"classid"!=j.toLowerCase()&&(e+=" "+j+'="'+c[j]+'"'));j="";for(var g in a)a[g]!=Object.prototype[g]&&(j+='<param name="'+g+'" value="'+a[g]+'" />');l.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+e+">"+j+"</object>";L[L.length]=c.id;h=r(c.id)}else{g=b.createElement(y);g.setAttribute("type",M);for(var n in c)c[n]!=Object.prototype[n]&&
("styleclass"==n.toLowerCase()?g.setAttribute("class",c[n]):"classid"!=n.toLowerCase()&&g.setAttribute(n,c[n]));for(e in a)a[e]!=Object.prototype[e]&&"movie"!=e.toLowerCase()&&(c=g,j=e,n=a[e],d=b.createElement("param"),d.setAttribute("name",j),d.setAttribute("value",n),c.appendChild(d));l.parentNode.replaceChild(g,l);h=g}return h}function V(a){var k=r(a);k&&"OBJECT"==k.nodeName&&(f.ie&&f.win?(k.style.display="none",function(){if(4==k.readyState){var d=r(a);if(d){for(var h in d)"function"==typeof d[h]&&
(d[h]=null);d.parentNode.removeChild(d)}}else setTimeout(arguments.callee,10)}()):k.parentNode.removeChild(k))}function r(a){var k=null;try{k=b.getElementById(a)}catch(d){}return k}function I(a){var k=f.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return k[0]>a[0]||k[0]==a[0]&&k[1]>a[1]||k[0]==a[0]&&k[1]==a[1]&&k[2]>=a[2]?!0:!1}function W(a,k,d,h){if(!f.ie||!f.mac){var l=b.getElementsByTagName("head")[0];if(l){d=d&&"string"==typeof d?d:"screen";h&&(Q=
p=null);if(!p||Q!=d)h=b.createElement("style"),h.setAttribute("type","text/css"),h.setAttribute("media",d),p=l.appendChild(h),f.ie&&(f.win&&typeof b.styleSheets!=m&&0<b.styleSheets.length)&&(p=b.styleSheets[b.styleSheets.length-1]),Q=d;f.ie&&f.win?p&&typeof p.addRule==y&&p.addRule(a,k):p&&typeof b.createTextNode!=m&&p.appendChild(b.createTextNode(a+" {"+k+"}"))}}}function A(a,k){if(X){var d=k?"visible":"hidden";z&&r(a)?r(a).style.visibility=d:W("#"+a,"visibility:"+d)}}function Y(a){return null!=/[\\\"<>\.;]/.exec(a)&&
typeof encodeURIComponent!=m?encodeURIComponent(a):a}var m="undefined",y="object",M="application/x-shockwave-flash",U="SWFObjectExprInst",t=window,b=document,w=navigator,Z=!1,H=[function(){if(Z){var c=b.getElementsByTagName("body")[0],k=b.createElement(y);k.setAttribute("type",M);var d=c.appendChild(k);if(d){var h=0;(function(){if(typeof d.GetVariable!=m){var b=d.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),f.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(10>h){h++;
setTimeout(arguments.callee,10);return}c.removeChild(k);d=null;a()})()}else a()}else a()}],v=[],L=[],C=[],F,K,O,T,z=!1,J=!1,p,Q,X=!0,f,aa=typeof b.getElementById!=m&&typeof b.getElementsByTagName!=m&&typeof b.createElement!=m,D=w.userAgent.toLowerCase(),E=w.platform.toLowerCase(),ba=E?/win/.test(E):/win/.test(D),E=E?/mac/.test(E):/mac/.test(D),D=/webkit/.test(D)?parseFloat(D.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,R=!+"\v1",G=[0,0,0],s=null;if(typeof w.plugins!=m&&typeof w.plugins["Shockwave Flash"]==
y){if((s=w.plugins["Shockwave Flash"].description)&&!(typeof w.mimeTypes!=m&&w.mimeTypes[M]&&!w.mimeTypes[M].enabledPlugin))Z=!0,R=!1,s=s.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),G[0]=parseInt(s.replace(/^(.*)\..*$/,"$1"),10),G[1]=parseInt(s.replace(/^.*\.(.*)\s.*$/,"$1"),10),G[2]=/[a-zA-Z]/.test(s)?parseInt(s.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof t.ActiveXObject!=m)try{var $=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if($&&(s=$.GetVariable("$version")))R=!0,s=s.split(" ")[1].split(","),
G=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)]}catch(ca){}f={w3:aa,pv:G,wk:D,ie:R,win:ba,mac:E};f.w3&&((typeof b.readyState!=m&&"complete"==b.readyState||typeof b.readyState==m&&(b.getElementsByTagName("body")[0]||b.body))&&g(),z||(typeof b.addEventListener!=m&&b.addEventListener("DOMContentLoaded",g,!1),f.ie&&f.win&&(b.attachEvent("onreadystatechange",function(){"complete"==b.readyState&&(b.detachEvent("onreadystatechange",arguments.callee),g())}),t==top&&function(){if(!z){try{b.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,
0);return}g()}}()),f.wk&&function(){z||(/loaded|complete/.test(b.readyState)?g():setTimeout(arguments.callee,0))}(),B(g)));f.ie&&f.win&&window.attachEvent("onunload",function(){for(var a=C.length,k=0;k<a;k++)C[k][0].detachEvent(C[k][1],C[k][2]);a=L.length;for(k=0;k<a;k++)V(L[k]);for(var d in f)f[d]=null;f=null;for(var b in swfobject)swfobject[b]=null;swfobject=null});return{registerObject:function(a,k,d,b){if(f.w3&&a&&k){var e={};e.id=a;e.swfVersion=k;e.expressInstall=d;e.callbackFn=b;v[v.length]=
e;A(a,!1)}else b&&b({success:!1,id:a})},getObjectById:function(a){if(f.w3)return e(a)},embedSWF:function(a,b,d,e,g,s,q,t,n,r){var u={success:!1,id:b};f.w3&&!(f.wk&&312>f.wk)&&a&&b&&d&&e&&g?(A(b,!1),x(function(){d+="";e+="";var f={};if(n&&typeof n===y)for(var p in n)f[p]=n[p];f.data=a;f.width=d;f.height=e;p={};if(t&&typeof t===y)for(var v in t)p[v]=t[v];if(q&&typeof q===y)for(var w in q)p.flashvars=typeof p.flashvars!=m?p.flashvars+("&"+w+"="+q[w]):w+"="+q[w];if(I(g))v=P(f,p,b),f.id==b&&A(b,!0),u.success=
!0,u.ref=v;else{if(s&&j()){f.data=s;N(f,p,b,r);return}A(b,!0)}r&&r(u)})):r&&r(u)},switchOffAutoHideShow:function(){X=!1},ua:f,getFlashPlayerVersion:function(){return{major:f.pv[0],minor:f.pv[1],release:f.pv[2]}},hasFlashPlayerVersion:I,createSWF:function(a,b,d){if(f.w3)return P(a,b,d)},showExpressInstall:function(a,b,d,e){f.w3&&j()&&N(a,b,d,e)},removeSWF:function(a){f.w3&&V(a)},createCSS:function(a,b,d,e){f.w3&&W(a,b,d,e)},addDomLoadEvent:x,addLoadEvent:B,getQueryParamValue:function(a){var e=b.location.search||
b.location.hash;if(e){/\?/.test(e)&&(e=e.split("?")[1]);if(null==a)return Y(e);for(var e=e.split("&"),d=0;d<e.length;d++)if(e[d].substring(0,e[d].indexOf("="))==a)return Y(e[d].substring(e[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(J){var a=r(U);a&&F&&(a.parentNode.replaceChild(F,a),K&&(A(K,!0),f.ie&&f.win&&(F.style.display="block")),O&&O(T));J=!1}}}}();this.createjs=this.createjs||{};
(function(){function g(){this.init()}function x(a,e,j){this.init(a,e,j)}function B(a,e,j){this.init(a,e,j)}g.capabilities=null;g.BASE_PATH="src/SoundJS/";g.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS)return!1;g.generateCapabilities();return null==swfobject?!1:swfobject.hasFlashPlayerVersion("9.0.0")};g.generateCapabilities=function(){null==g.capabilities&&(g.capabilities={panning:!0,volume:!0,tracks:-1,mp3:!0,ogg:!1,mpeg:!0,wav:!0,m4a:!0,mp4:!0,aiff:!1,wma:!1,mid:!1})};g.prototype=
{audioSources:null,volume:1,CONTAINER_ID:"flashAudioContainer",WRAPPER_ID:"SoundJSFlashContainer",capabilities:null,container:null,flash:null,flashReady:!1,flashInstances:null,flashPreloadInstances:null,preloadInstances:null,queuedInstances:null,showOutput:!1,init:function(){this.capabilities=g.capabilities;this.audioSources={};this.flashInstances={};this.flashPreloadInstances={};this.preloadInstances={};this.queuedInstances=[];var a=this.wrapper=document.createElement("div");a.id=this.WRAPPER_ID;
a.style.position="absolute";a.style.marginLeft="-1px";a.className=this.WRAPPER_ID;document.body.appendChild(a);var e=this.container=document.createElement("div");e.id=this.CONTAINER_ID;e.appendChild(document.createTextNode("SoundJS Flash Container"));a.appendChild(e);swfobject.embedSWF(g.BASE_PATH+"FlashAudioPlugin.swf",this.CONTAINER_ID,"1","1","9.0.0",null,null,null,null,createjs.proxy(this.handleSWFReady,this))},handleSWFReady:function(a){this.flash=a.ref;this.loadTimeout=setTimeout(createjs.proxy(this.handleTimeout,
this),2E3)},handleFlashReady:function(){this.flashReady=!0;for(var a=0,e=this.queuedInstances.length;a<e;a++)this.flash.register(this.queuedInstances[a]);this.queuedInstances=[];for(var j in this.flashPreloadInstances)this.flashPreloadInstances[j].initialize(this.flash);for(j in this.preloadInstances)this.preloadInstances[j].initialize(this.flash);this.preloadInstances={};for(j in this.flashInstances)this.flashInstances[j].initialize(this.flash)},handleTimeout:function(){},register:function(a){this.audioSources[a]=
!0;this.flashReady?this.flash.register(a):this.queuedInstances.push(a);return{tag:new B(a,this,this.flash)}},removeSound:function(a){delete this.audioSources[a];a=this.queuedInstances.indexOf(a);-1!=a&&this.queuedInstances.splice(a,1)},removeAllSounds:function(){this.audioSources={};this.queuedInstances=[];this.flashInstances={};this.flashPreloadInstances={};this.preloadInstances={}},create:function(a){this.isPreloadStarted(a)||this.preload(a);try{return new x(a,this,this.flash)}catch(e){}return null},
isPreloadStarted:function(a){return null!=this.audioSources[a]},preload:function(a){this.audioSources[a]=!0;(new B(a,this,this.flash)).load()},setVolume:function(a){this.volume=a;return this.updateVolume()},updateVolume:function(){return this.flash.setMasterVolume(createjs.Sound.masterMute?0:this.volume)},getVolume:function(){return this.volume},setMute:function(){return this.updateVolume()},registerPreloadInstance:function(a,e){this.flashPreloadInstances[a]=e},unregisterPreloadInstance:function(a){delete this.flashPreloadInstances[a]},
registerSoundInstance:function(a,e){this.flashInstances[a]=e},unregisterSoundInstance:function(a){delete this.flashInstances[a]},flashLog:function(a){try{this.showOutput&&console.log(a)}catch(e){}},handleSoundEvent:function(a,e){var j=this.flashInstances[a];if(null!=j){for(var g=[],q=2,u=arguments.length;q<u;q++)g.push(arguments[q]);try{if(0==g.length)j[e]();else j[e].apply(j,g)}catch(x){}}},handlePreloadEvent:function(a,e){var j=this.flashPreloadInstances[a];if(null!=j){for(var g=[],q=2,u=arguments.length;q<
u;q++)g.push(arguments[q]);try{if(0==g.length)j[e]();else j[e].apply(j,g)}catch(x){}}},handleEvent:function(a){switch(a){case "ready":clearTimeout(this.loadTimeout),this.handleFlashReady()}},handleErrorEvent:function(){},toString:function(){return"[FlashPlugin]"}};createjs.FlashPlugin=g;x.prototype={src:null,uniqueId:-1,owner:null,capabilities:null,flash:null,flashId:null,loop:0,volume:1,pan:0,offset:0,duration:0,delayTimeoutId:null,muted:!1,paused:!1,addEventListener:null,removeEventListener:null,
removeAllEventListeners:null,dispatchEvent:null,hasEventListener:null,_listeners:null,onComplete:null,onLoop:null,onReady:null,onPlayFailed:null,onPlayInterrupted:null,onPlaySucceeded:null,init:function(a,e,g){this.src=a;this.owner=e;this.flash=g},initialize:function(a){this.flash=a},interrupt:function(){this.playState=createjs.Sound.PLAY_INTERRUPTED;if(null!=this.onPlayInterrupted)this.onPlayInterrupted(this);this.flash.interrupt(this.flashId);this.cleanUp();this.paused=!1;this.sendEvent("interrupted")},
cleanUp:function(){clearTimeout(this.delayTimeoutId);this.owner.unregisterSoundInstance(this.flashId);createjs.Sound.playFinished(this)},play:function(a,e,g,x,q,u){createjs.Sound.playInstance(this,a,e,g,x,q,u)},beginPlaying:function(a,e,g,x){this.loop=e;this.paused=!1;if(!this.owner.flashReady)return!1;this.offset=a;this.flashId=this.flash.playSound(this.src,a,e,g,x);if(null==this.flashId){if(null!=this.onPlayFailed)this.onPlayFailed(this);this.cleanUp();return!1}this.muted&&this.setMute(!0);this.playState=
createjs.Sound.PLAY_SUCCEEDED;this.owner.registerSoundInstance(this.flashId,this);this.onPlaySucceeded&&this.onPlaySucceeded(this);this.sendEvent("succeeded");return!0},playFailed:function(){this.playState=createjs.Sound.PLAY_FAILED;if(null!=this.onPlayFailed)this.onPlayFailed(this);this.cleanUp();this.sendEvent("failed")},pause:function(){return!this.paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.paused=!0,clearTimeout(this.delayTimeoutId),this.flash.pauseSound(this.flashId)):!1},resume:function(){if(!this.paused)return!1;
this.paused=!1;return this.flash.resumeSound(this.flashId)},stop:function(){this.playState=createjs.Sound.PLAY_FINISHED;this.paused=!1;this.offset=0;var a=this.flash.stopSound(this.flashId);this.cleanUp();return a},setVolume:function(a){if(null==Number(a))return!1;this.volume=a=Math.max(0,Math.min(1,a));return this.flash.setVolume(this.flashId,a)},getVolume:function(){return this.volume},mute:function(a){return(this.muted=a)?this.flash.muteSound(this.flashId):this.flash.unmuteSound(this.flashId)},
setMute:function(a){return(this.muted=a)?this.flash.muteSound(this.flashId):this.flash.unmuteSound(this.flashId)},getMute:function(){return this.muted},getPan:function(){return this.pan},setPan:function(a){this.pan=a;return this.flash.setPan(this.flashId,a)},getPosition:function(){var a=-1;this.flash&&this.flashId&&(a=this.flash.getPosition(this.flashId));-1!=a&&(this.offset=a);return this.offset},setPosition:function(a){this.offset=a;this.flash&&this.flashId&&this.flash.setPosition(this.flashId,
a);return!0},getDuration:function(){var a=-1;this.flash&&this.flashId&&(a=this.flash.getDuration(this.flashId));-1!=a&&(this.duration=a);return this.duration},sendEvent:function(a){this.dispatchEvent({target:this,type:a})},handleSoundFinished:function(){this.playState=createjs.Sound.PLAY_FINISHED;this.cleanUp();if(null!=this.onComplete)this.onComplete(this);this.sendEvent("complete")},handleSoundLoop:function(){if(null!=this.onLoop)this.onLoop(this);this.sendEvent("loop")},toString:function(){return"[FlashPlugin SoundInstance]"}};
createjs.EventDispatcher.initialize(x.prototype);B.prototype={flash:null,src:null,flashId:null,progress:-1,readyState:0,loading:!1,owner:null,onload:null,onprogress:null,onerror:null,init:function(a,e,g){this.src=a;this.owner=e;this.flash=g},initialize:function(a){this.flash=a;this.loading&&(this.loading=!1,this.load(this.src))},load:function(a){null!=a&&(this.src=a);if(null==this.flash||!this.owner.flashReady)return this.loading=!0,this.owner.preloadInstances[this.src]=this,!1;this.flashId=this.flash.preload(this.src);
this.owner.registerPreloadInstance(this.flashId,this);return!0},handleProgress:function(a,e){this.progress=a/e;this.onprogress&&this.onprogress({loaded:a,total:e,progress:this.progress})},handleComplete:function(){this.progress=1;this.readyState=4;createjs.Sound.sendFileLoadEvent(this.src);this.onload&&this.onload()},handleError:function(a){this.onerror&&this.onerror(a)},toString:function(){return"[FlashPlugin SoundLoader]"}}})();(function(){var g=this.createjs=this.createjs||{},g=g.FlashPlugin=g.FlashPlugin||{};g.version="NEXT";g.buildDate="Fri, 11 Jan 2013 22:39:59 GMT"})();
